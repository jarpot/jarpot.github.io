<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/jquery-3.4.1.js"></script>
</head>

<body>
    <input id="chkAll" type="checkbox"><br>
    <div>
        <input type="checkbox">
        <input type="checkbox">
        <input type="checkbox">
        <input type="checkbox">
    </div>

    <script>
        /*1.全选效果：
            当点击全选框时，让下边的复选框的 checked 状态跟 全选框一样
        */
        $("#chkAll").click(function () {
            //1.先获取全选框状态
            var state = $(this).prop('checked');
            //2.让下边的复选框的 checked 状态跟 全选框一样
            $("input:gt(0)").prop('checked', state);
        })
        /*
            反选效果：
                给下边的每一个复选框绑定点击事件，点击每一个都要判断 下边所有复选框的状态。看其中存在不存在
                没有被选中的框，只要存在，全选框就不选中，否则就选中。
        */
        var $input = $("input:gt(0)");
        $input.click(function () {
            //方法一：常规方法
            //下边所有复选框的状态,看其中存在不存在 没有被选中的框
            var st = false;//假设不存在没有被选中的框
            $input.each(function () {
                if ($(this).prop('checked') == false) {
                    //存在没有被选中的 就给st重新赋值为 true
                    st = true;
                    //jquery的遍历函数中无法使用break停止循环，所以使用  return  false;
                    return false;
                }
            })

            //根据st做判断
            if (st == true) {
                $("#chkAll").prop('checked', false);
            } else {
                $("#chkAll").prop('checked', true);
            }

            //方法二：简易写法：
            /*
                判断下边的复选框checked==true的有几个，只要这个长度==所有下边inupt框的个数 就证明 下边的复选框都被选中了
                此时就给全选框 checked 赋值 为 true
                否则就给全选框 checked 赋值 为 false
            */
            //$("#chkAll").prop('checked', $("input:gt(0):checked").length == $("input:gt(0)").length ? true : false );
        })
    </script>
</body>

</html>