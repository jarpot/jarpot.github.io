<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //分别通过  promise形式和 async+await形式 来完成 读取三个json文件中的数据
        //最终拿到结果 一个拼接了三个json文件内容的字符串。
        /*
            第一次请求得到111.json数据 
            第二次请求  要带上 第一次请求的参数
            第三次请求  再带上之前的参数
        */
       //常规ajax回调地狱模式
        /* $.ajax({
            success(res) {
                $.ajax({
                    success(res) {
                        $.ajax({
                            success(res) {

                            }
                        })
                    }
                })
            }
        }) */

        //封装读取json文件的函数
        function loadJson(url){
            return new Promise((resolve,reject)=> {
                let ajax_ = new XMLHttpRequest();
                ajax_.open('get', url, true);
                ajax_.send();
                //ajax_.send('username=张三&pass=12345');
                ajax_.onreadystatechange = function () {
                    //进行状态码的判断 readyState 0 1 2 3 4
                    if (ajax_.readyState == 4) {
                        if (ajax_.status == 200) {
                            //请求成功 
                            resolve(ajax_.responseText);
                        } else {
                            //请求失败
                            reject('请求失败');
                        }
                    }
                }
            })
        }
        let url1 = './111.json';
        let url2 = './222.json';
        let url3 = './333.json';

        //使用Promise形式
        Promise.all([
            loadJson(url1),
            loadJson(url2),
            loadJson(url3)
        ]).then(res=>{
            let str = '';
            for (const s of res) {
                str+=s;
            }
            console.log(str);
        })
    </script>
</body>

</html>