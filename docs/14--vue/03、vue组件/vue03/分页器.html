<!doctype html>
<html lang="en">

<head>
    <script src="./lib/vue.js" type="text/javascript" charset="utf-8"></script>
    <title>vue分页</title>
    <style type="text/css">
        ul {
            list-style: none;
            margin: 0;
        }

        .pagetation_info {
            width: 100%;
            height: 24px;
            padding: 20px 0;
        }

        ul.pagetation_box {
            float: right;
            height: 100%;
            padding: 0 60px;
        }

        ul.pagetation_box li {
            float: left;
            height: 100%;
            border: 1px solid #e6ecef;
            background-color: #f8f8f8;
            margin: 0 5px;
            padding: 0 10px;
            color: #263238;
            cursor: pointer;
            text-align: center;
            line-height: 22px;
        }

        ul.pagetation_box li a {
            text-decoration: none;
            color: #263238;
            font-size: 12px;
        }

        ul.pagetation_box li.active {
            background-color: #FF4646;
            border-color: #FF4646;
        }

        ul.pagetation_box li.active a {
            color: #fff;
        }

        ul.pagetation_box li.prev,
        ul.pagetation_box li.next {
            width: 7px;
        }

        ul.pagetation_box li:hover {
            background-color: #FF4646;
            border-color: #FF4646;
        }

        ul.pagetation_box li:hover a {
            color: #fff;
        }

        ul.pagetation_box li.more {
            width: 24px;
            padding: 0;
            background: url(../img/public/page_more.png) no-repeat center center;
            border: none;
        }

        .num_total {
            float: right;
            height: 100%;
            line-height: 22px;
            padding-top: 3px;
            padding-bottom: 3px;
        }

        .num_total>span {
            color: #FC5B27;
        }
    </style>
</head>

<body id="">
    <div id="app-body">
        <div class="pagetation_info clearfix">
            <ul class="pagetation_box">
                <li class="firstPage" @click="page.currentPage=1"><a href="javascript:;">首页</a></li>
                <!-- 上一页 -->
                <li class="prev" v-show="page.currentPage != 1"
                    @click="page.currentPage-- && _gotoPage(page.currentPage)"><a href="javascript:;">&lt;</a></li>
                <!-- 页码展示 -->
                    <li v-for="item in pages" @click="_gotoPage(item)" :class="{'active':page.currentPage == item}">
                    <a href="javascript:;">{{item}}</a>
                </li>
                <!-- 下一页 -->
                <li class="next" v-show="page.allPages != page.currentPage && page.allPages != 0 "
                    @click="page.currentPage++ && _gotoPage(page.currentPage)"><a href="javascript:;">&gt;</a></li>
                <li class="lastPage" @click="page.currentPage=page.allPages"><a href="javascript:;">尾页</a></li>
            </ul>
            <div class="num_total">
                共 <span>{{page.allRecords}}</span> 条信息，共 <span>{{page.allPages}}</span> 页
            </div>
        </div>
    </div>
    <script>
        new Vue({
            el: "#app-body",
            data: {
                //定义页码对象
                page: {
                    //当前页
                    "currentPage": 1,
                    //每页的条数
                    "pagesize": 10,
                    //总数据条数
                    "allRecords": 150,
                    //总页码
                    "allPages": 15,
                    //展示的所有页码数
                    "showItem": 5,
                }
            },
            computed: {
                //通过计算属性计算 中间显示的页码数
                pages() {
                    //定义一个空数组  用来存储页面中需要显示的页码数
                    /*
                        根据分析  把这个数组中的数据 分成三段
                            第一段:[1,2,3,4,5] 
                                只要当前页码currentPage 小于等于 展示的页码showItem  此时 数组就处于 第一段范围
                            第二段:
                                [2,3,4,5,6]
                                [3,4,5,6,7]
                                [4,5,6,7,8]
                                [5,6,7,8,9]
                                ....
                            第三段:[11,12,13,14,15]
                    */
                    var p = [];
                    //如果当前页码数 小于 展示的页码数
                    if (this.page.currentPage <= this.page.showItem) {
                        //就从 当前选中的页码数 和当前所有的页码数 取出较小的值
                        var i = Math.min(this.page.showItem, this.page.allPages);
                        //将得到的较小的数据做循环 得到一个页码组成的数组
                        while (i > 0) {
                            p.unshift(i--);//[1,2,3,4,5]
                        }
                    } else {//如果当前页码数 > 显示的页码数
                        //取中间数 使用当前页 - 选中页/2
                        var middle = this.page.currentPage - Math.floor(this.page.showItem / 2);
                        //把当前展示的页码的总数赋值给 i 主要是保证数组长度不能超过 showItem
                        let i = this.page.showItem;
                        console.log(middle, i);
                        //如果页码的中间数 大于  页码总数-展示的页码数
                        //相当于剩余 最终的两页的时候 页码的数组就不再发生变化了 
                        if (middle > (this.page.allPages - this.page.showItem)) {
                            //中间数 = 页码总数-展示页码数+1
                            middle = (this.page.allPages - this.page.showItem) + 1
                        }
                        while (i-- > 0) {
                            p.push(middle++);//[4,5,6,7,8]
                        }

                        //不取中间数的方法
                        /* let i = this.page.currentPage;
                        while(i > (this.page.currentPage - this.page.showItem)){
                            p.unshift(i--)//[3,4,5,6,7]
                        } */
                    }
                    return p;
                },
            },
            methods: {
                _gotoPage(i) {
                    //var _this = this;
                    if (i == this.page.currentPage) return;
                    this.page.currentPage = i;
                },
            }
        });
    </script>

</body>

</html>