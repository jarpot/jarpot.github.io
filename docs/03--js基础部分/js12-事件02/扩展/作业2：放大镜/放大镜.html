<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{ padding: 0px; margin: 0px}
		#small{ width: 300px; height: 225px; float: left; border: 1px #000 solid; position: relative;}
		#big{ width: 300px; height: 300px; float: left ; overflow: hidden; border: 1px #000 solid; margin-left: 30px; position: relative;}
		#mark{ width: 100px; height: 100px; opacity: 0.3; background: #000; position:  absolute; left: 0px ;top: 0px; cursor: move;}
		#tu{ position: absolute;; left: 0px top:0px;}
	</style>
</head>
<body>
	<div id='box'>
		<div id='small'>
			<img src="images/smallpic.jpg" alt="">
			<span id='mark'></span>
		</div>
		<div id='big'>
			<img src="images/bigpic.jpg" alt="" id='tu'>
		</div>
	</div>
	<script>
		var small=document.getElementById('small');
		var mark=document.getElementById('mark');
		var tu=document.getElementById('tu');
		small.onmouseover=function(e)
		{
			var event=e||window.event;
			//鼠标距浏览器距离	event.clientX
			//小图片距浏览器距离 small.offsetLeft
			//mark一半的宽度 (mark.offsetWidth)/2
			console.log(event.clientX,small.offsetLeft,(mark.offsetWidth)/2);
			var left=event.clientX-small.offsetLeft-(mark.offsetWidth)/2;
			var top=event.clientY-small.offsetTop-(mark.offsetHeight)/2;
			
			var maxW=small.offsetWidth-mark.offsetWidth;
			var maxH=small.offsetHeight-mark.offsetHeight;

			if(left<0)left=0;
			if(top<0)top=0;
			if(left>maxW)left=maxW;
			if(top>maxH)top=maxH;


			mark.style.left=left+'px';
			mark.style.top=top+'px';

			tu.style.left=-left*(tu.offsetWidth/small.offsetWidth)+'px';
			tu.style.top=-top*(tu.offsetHeight/small.offsetHeight)+'px';
		}
	</script>
</body>
</html>